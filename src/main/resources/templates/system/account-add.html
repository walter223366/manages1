<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>账号管理-新增</title>

    <link rel="stylesheet" th:href="@{/css/index.css}">
    <link rel="stylesheet" th:href="@{/layui/css/layui.css}">
    <link rel="stylesheet" th:href="@{/favicon.ico}">

    <script th:src="@{/js/jquery.min.js}"></script>
    <script th:src="@{/layui/layui.js}" charset="utf-8"></script>
    <script th:src="@{/js/index.js}" type="text/javascript"></script>

<body>
<div class="x-body">
    <form class="layui-form">

        <div class="layui-form-item">
            <label class="layui-form-label"><span class="x-red">*</span>账号名称</label>
            <div class="layui-input-inline">
                <input type="text" id="account" autocomplete="off" class="layui-input">
            </div>
            <div class="layui-form-mid layui-word-aux" id="errorAccount"></div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label"><span class="x-red">*</span>手机号码</label>
            <div class="layui-input-inline">
                <input type="number" id="tellphone" autocomplete="off" class="layui-input" onkeypress="return (/[\d]/.test(String.fromCharCode(event.keyCode)))">
            </div>
            <div class="layui-form-mid layui-word-aux" id="errorTellphone"></div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label"><span class="x-red">*</span>密码</label>
            <div class="layui-input-inline">
                <input type="password" id="spassword" autocomplete="off" class="layui-input"></div>
            <div class="layui-form-mid layui-word-aux">由6到16个字符组成</div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label"><span class="x-red">*</span>确认密码</label>
            <div class="layui-input-inline">
                <input type="password" id="epassword" autocomplete="off" class="layui-input">
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label"><span class="x-red">*</span>来源</label>
            <div class="layui-input-inline">
                <input type="text" id="source" autocomplete="off" class="layui-input">
            </div>
        </div>

        <div class="layui-form-item">
            <label for="epassword" class="layui-form-label"></label>
            <button class="layui-btn" lay-filter="add" lay-submit="" type="button" onclick="account_add()">新增</button>
            <button class="layui-btn layui-btn-primary" type="button" onclick="account_reset()">重置</button>
        </div>
    </form>
</div>
<script>

    /**新增*/
    function account_add(){
        $("#errorAccount").empty();
        $("#errorTellphone").empty();
        var account = $("#account").val();
        var tellphone = $("#tellphone").val();
        var password = $("#spassword").val();
        var repassword = $("#epassword").val();
        var source = $("#source").val();
        $.ajax({
            type: "POST",
            dataType: "JSON",
            url: "/account/accountAdd",
            data: {
                account: account,
                tellphone: Number(tellphone),
                password: password,
                source: Number(source)
            },
            success: function (data) {
                if (data.code == "0" && data.result == "SECCESS") {
                    layer.msg(data.msg);
                }else{
                    layer.msg(data.msg);
                }
            }
        })
    }

    /**重置*/
    function account_reset(){
        document.getElementById("account").value = '';
        document.getElementById("tellphone").value = '';
        document.getElementById("spassword").value = '';
        document.getElementById("epassword").value = '';
        document.getElementById("source").value = '';
    }
</script>
</body>
</html>