<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>账号管理-新增</title>

    <link rel="stylesheet" th:href="@{/css/index.css}">
    <link rel="stylesheet" th:href="@{/layui/css/layui.css}">
    <link rel="stylesheet" th:href="@{/favicon.ico}">

    <script th:src="@{/js/jquery.min.js}"></script>
    <script th:src="@{/layui/layui.js}" charset="utf-8"></script>
    <script th:src="@{/js/index.js}" type="text/javascript"></script>

<body>
<div class="x-body">
    <form class="layui-form">

        <div class="layui-form-item">
            <label class="layui-form-label"><span class="x-red">*</span>账号名称</label>
            <div class="layui-input-inline">
                <input type="text" id="account" name="account" autocomplete="off" class="layui-input">
            </div>
            <div class="layui-form-mid layui-word-aux" id="errorAccount"></div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label"><span class="x-red">*</span>手机号码</label>
            <div class="layui-input-inline">
                <input type="number" id="tellphone" name="phone" required lay-verify="phone" autocomplete="off" class="layui-input" onkeypress="return (/[\d]/.test(String.fromCharCode(event.keyCode)))">
            </div>
        </div>

        <div class="layui-form-item">
            <label for="password" class="layui-form-label"><span class="x-red">*</span>密码</label>
            <div class="layui-input-inline">
                <input type="password" id="password" name="pass" required lay-verify="pass" autocomplete="off" class="layui-input"></div>
            <div class="layui-form-mid layui-word-aux">由6到16个字符组成</div>
        </div>

        <div class="layui-form-item">
            <label for="re_password" class="layui-form-label"><span class="x-red">*</span>确认密码</label>
            <div class="layui-input-inline">
                <input type="password" id="re_password" name="repass" required lay-verify="repass" autocomplete="off" class="layui-input">
            </div>
        </div>

        <div class="layui-form-item">
            <label for="source" class="layui-form-label"><span class="x-red">*</span>来源</label>
            <div class="layui-input-inline">
                <input type="text" id="source" name="source" autocomplete="off" class="layui-input">
            </div>
        </div>

        <div class="layui-form-item">
            <label for="re_password" class="layui-form-label"></label>
            <button class="layui-btn" lay-filter="add" lay-submit="" type="button" onclick="account_add()">新增</button>
            <button class="layui-btn layui-btn-primary" type="button" onclick="">重置</button>
        </div>
    </form>
</div>
<script>

    /**新增请求*/
    function account_add(){
        $("#errorAccount").empty();
        var account = $("#account").val();
        var tellphone = $("#tellphone").val();
        var password = $("#password").val();
        var repassword = $("#re_password").val();
        var source = $("#source").val();
        if(account==null || account==""){
            layui.alert("账号名不能为空");
            //$("#errorAccount").append("<p class='color:red'>账号名不能为空</p>");
            return;
        }else{
            if(account.length <=6 && account.length >= 12){
                $("#errorAccount").append("<p class='color:red'>账号名由6至12位字符组成</p>");
                return;
            }
        }

        $.ajax({
            type: "POST",
            dataType: "JSON",
            url: "/account/toAccountAdd",
            data: {
                account: account,
                tellphone: Number(tellphone),
                password: password,
                source: Number(source)
            },
            success: function (data) {
                if (data.code == "0" && data.result == "SECCESS") {
                    layer.alert(data.msg);
                }else{
                    layer.alert(data.msg);
                }
            }
        })
    }



   /* window.a = layui.use(['form','layer'], function(){
        $ = layui.jquery;
        var form = layui.form
            ,layer = layui.layer;
        //校验
        form.verify({
            required: function(value){
                if(value.length < 6){
                    return '账号名称至少得6个字符';
                }
            },
            phone: function(value){
                if(value != null || value != ""){
                    if(value.length != 11){
                        return '手机号码由11个数字组成';
                    }
                }
            },
            pass: [/(.+){6,12}$/, '密码必须6到12位字符组成'],
            repass: function(value){
                if($('#password').val()!=$('#re_password').val()){
                    return '两次密码不一致';
                }
            }
        });

        //监听提交
        /!*form.on('submit(add)', function(data){
            console.log(data);
            layer.alert("增加成功", {icon: 6},function () {
                var index = parent.layer.getFrameIndex(window.name);
                parent.layer.close(index);
            });
            return false;
        });*!/
    });*/
</script>
</body>
</html>